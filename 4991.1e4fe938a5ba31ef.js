"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4991],{4991:(Y,m,l)=>{l.r(m),l.d(m,{HomePageModule:()=>F});var u=l(6814),c=l(95),r=l(5548),p=l(6745),v=l(5861),e=l(5879),g=l(6949),h=l(4532),_=l(74),T=l(5890);function k(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1,"Este campo es requerido"),e.qZA())}function x(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1,"Este campo requiere al menos 4 caracteres"),e.qZA())}function Z(t,s){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,k,2,0,"div",15),e.YNc(2,x,2,0,"div",15),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.form.controls.title.errors?null:n.form.controls.title.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.form.controls.title.errors?null:n.form.controls.title.errors.minlength)}}function C(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1,"Este campo es requerido"),e.qZA())}function b(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1,"Este campo requiere al menos 4 caracteres"),e.qZA())}function A(t,s){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,C,2,0,"div",15),e.YNc(2,b,2,0,"div",15),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.form.controls.description.errors?null:n.form.controls.description.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.form.controls.description.errors?null:n.form.controls.description.errors.minlength)}}function U(t,s){if(1&t&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" Progreso: ",n.getPercentage(),"% ")}}function S(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"ion-item",17)(2,"ion-checkbox",18),e.NdJ("ngModelChange",function(o){const d=e.CHM(n).$implicit;return e.KtG(d.completed=o)}),e.qZA(),e.TgZ(3,"ion-label",19),e._uU(4),e.qZA(),e.TgZ(5,"ion-buttons",16)(6,"ion-button",20),e.NdJ("click",function(){const a=e.CHM(n).index,d=e.oxw();return e.KtG(d.removeItem(a))}),e._UZ(7,"ion-icon",21),e.qZA()()(),e.TgZ(8,"ion-item",22),e._UZ(9,"ion-reorder",16),e.qZA()()}if(2&t){const n=s.$implicit;e.xp6(2),e.Q6J("ngModel",n.completed),e.xp6(2),e.hij(" ",n.name," ")}}let P=(()=>{var t;class s{constructor(i,o){this.firebaseSvc=i,this.utilsSvc=o,this.user={},this.form=new c.cw({id:new c.NI(""),title:new c.NI("",[c.kI.required,c.kI.minLength(4)]),description:new c.NI("",[c.kI.required,c.kI.minLength(4)]),items:new c.NI([],[c.kI.required,c.kI.minLength(1)])})}ngOnInit(){this.user=this.utilsSvc.getElementFromLocalStorage("user"),this.task&&(this.form.setValue(this.task),this.form.updateValueAndValidity())}submit(){this.form.valid&&(this.task?this.UpdateTask():this.createTask())}createTask(){let i=`users/${this.user.uid}`;this.utilsSvc.presentLoading(),delete this.form.value.id,this.firebaseSvc.addToSubcollection(i,"tasks",this.form.value).then(o=>{this.utilsSvc.dismissModal({success:!0}),this.utilsSvc.presentToast({message:"Tarea creada correctamente",color:"success",icon:"checkmark-circle-outline",duration:2e3}),this.utilsSvc.dismissLoading()},o=>{this.utilsSvc.presentToast({message:o,color:"warning",icon:"alert-circle-outline",duration:5e3}),this.utilsSvc.dismissLoading()})}UpdateTask(){let i=`users/${this.user.uid}/tasks/${this.task.id}`;this.utilsSvc.presentLoading(),delete this.form.value.id,this.firebaseSvc.updateDocument(i,this.form.value).then(o=>{this.utilsSvc.dismissModal({success:!0}),this.utilsSvc.presentToast({message:"Tarea actualizada correctamente",color:"success",icon:"checkmark-circle-outline",duration:2e3}),this.utilsSvc.dismissLoading()},o=>{this.utilsSvc.presentToast({message:o,color:"warning",icon:"alert-circle-outline",duration:5e3}),this.utilsSvc.dismissLoading()})}getPercentage(){return this.utilsSvc.getPercentage(this.form.value)}handleReorder(i){this.form.value.items=i.detail.complete(this.form.value.items),this.form.updateValueAndValidity()}removeItem(i){this.form.value.items.splice(i,1),this.form.controls.items.updateValueAndValidity()}createItem(){this.utilsSvc.presentAlert({header:"Nueva Actividad",backdropDismiss:!1,inputs:[{name:"name",type:"textarea",placeholder:"Hacer algo..."}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Agregar",handler:i=>{this.form.value.items.push({name:i.name,completed:!1}),this.form.controls.items.updateValueAndValidity()}}]})}}return(t=s).\u0275fac=function(i){return new(i||t)(e.Y36(g.O),e.Y36(h.F))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-update-task"]],inputs:{task:"task"},decls:19,vars:13,consts:[["color","light",1,"ion-padding"],["color","light",3,"centerTitle","isModal","title"],["type","text","label","Titulo",3,"control"],["class","validators",4,"ngIf"],["type","text-area","label","Descripci\xf3n",3,"control"],["lines","none",1,"item-header"],["slot","end",4,"ngIf"],["slot","end","mode","ios",3,"click"],["name","add-circle-outline"],[3,"value"],[3,"disabled","ionItemReorder"],[4,"ngFor","ngForOf"],[1,"ion-text-center"],["mode","ios","shape","round",1,"ion-margin",3,"disabled","click"],[1,"validators"],[4,"ngIf"],["slot","end"],["lines","none"],["slot","start","color","success",3,"ngModel","ngModelChange"],[1,"ion-text-wrap"],[3,"click"],["color","danger","name","trash-outline"],[1,"item-reorder"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-content",0),e._UZ(1,"app-header",1)(2,"app-custom-input",2),e.YNc(3,Z,3,2,"div",3),e._UZ(4,"app-custom-input",4),e.YNc(5,A,3,2,"div",3),e.TgZ(6,"ion-item",5)(7,"ion-label"),e._uU(8,"Actividades"),e.qZA(),e.YNc(9,U,2,1,"span",6),e.TgZ(10,"ion-button",7),e.NdJ("click",function(){return o.createItem()}),e._UZ(11,"ion-icon",8),e.qZA()(),e._UZ(12,"ion-range",9),e.TgZ(13,"ion-reorder-group",10),e.NdJ("ionItemReorder",function(d){return o.handleReorder(d)}),e.YNc(14,S,10,2,"div",11),e.qZA()(),e.TgZ(15,"ion-footer")(16,"div",12)(17,"ion-button",13),e.NdJ("click",function(){return o.submit()}),e._uU(18),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("centerTitle",!0)("isModal",!0)("title",o.task?"Tarea":"Nueva Tarea"),e.xp6(1),e.Q6J("control",o.form.controls.title),e.xp6(1),e.Q6J("ngIf",o.form.controls.title.errors&&o.form.controls.title.dirty),e.xp6(1),e.Q6J("control",o.form.controls.description),e.xp6(1),e.Q6J("ngIf",o.form.controls.description.errors&&o.form.controls.description.dirty),e.xp6(4),e.Q6J("ngIf",o.form.value.items.length),e.xp6(3),e.Q6J("value",o.getPercentage()),e.xp6(1),e.Q6J("disabled",!1),e.xp6(1),e.Q6J("ngForOf",o.form.value.items),e.xp6(3),e.Q6J("disabled",o.form.invalid),e.xp6(1),e.hij(" ",o.task?"Guardar Cambios":"Crear Tarea"," "))},dependencies:[u.sg,u.O5,r.YG,r.Sm,r.nz,r.W2,r.fr,r.gu,r.Ie,r.Q$,r.I_,r.Nh,r.oz,r.w,r.QI,c.JJ,c.On,_.G,T.O],styles:[".item-header[_ngcontent-%COMP%]{padding-top:30px}.item-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:18px;font-weight:700}ion-range[_ngcontent-%COMP%]{--bar-background: rgba(128, 128, 128, .281);--bar-background-active:var(--ion-color-success);--height: 20px;--knob-size:5px}.item-reorder[_ngcontent-%COMP%]{--min-height: 32px}ion-footer[_ngcontent-%COMP%]{background:var(--ion-color-light)}"]}),s})();var M=l(2126);function I(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"ion-col",5)(1,"ion-card",6)(2,"ion-grid")(3,"ion-row")(4,"ion-col",7),e._UZ(5,"circle-progress",8),e.qZA(),e.TgZ(6,"ion-col",9)(7,"div",10),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.ALo(11,"slice"),e.qZA(),e.TgZ(12,"div",11)(13,"ion-button",12),e.NdJ("click",function(){const a=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.addOrUpdateTask(a))}),e._uU(14," Ver Tarea "),e._UZ(15,"ion-icon",13),e.qZA(),e.TgZ(16,"ion-button",14),e.NdJ("click",function(){const a=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.confirmDeleteTask(a))}),e._uU(17," Eliminar Tarea "),e._UZ(18,"ion-icon",15),e.qZA()()()()()()()}if(2&t){const n=s.$implicit,i=e.oxw();e.xp6(5),e.Q6J("percent",i.getPercentage(n))("radius",65)("outerStrokeWidth",6)("innerStrokeWidth",4)("outerStrokeColor","#78C000")("innerStrokeColor","#C7E596")("animation",!0)("titleColor","var(--ion-color-dark)")("animationDuration",300)("subtitle","Progreso"),e.xp6(3),e.Oqu(n.title),e.xp6(2),e.hij("",e.Dn7(11,12,n.description,0,85),"...")}}function w(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"ion-skeleton-text",17),e.qZA())}function J(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"ion-skeleton-text",18),e.qZA())}const f=function(){return[1,1,1,1]};function O(t,s){1&t&&(e.TgZ(0,"ion-col",5)(1,"ion-card",6),e.YNc(2,w,2,0,"div",16),e.YNc(3,J,2,0,"div",16),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",e.DdM(2,f)),e.xp6(1),e.Q6J("ngForOf",e.DdM(3,f)))}const N=function(){return[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]};function z(t,s){1&t&&(e.TgZ(0,"ion-row"),e.YNc(1,O,4,4,"ion-col",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,N)))}function H(t,s){1&t&&(e.TgZ(0,"ion-row")(1,"ion-col",19),e._UZ(2,"ion-icon",20),e.TgZ(3,"h4"),e._uU(4,"No tienes tareas"),e.qZA()()())}const q=[{path:"",component:(()=>{var t;class s{constructor(i,o,a){this.firebaseSvc=i,this.utilsSvc=o,this.platform=a,this.user={},this.tasks=[],this.loading=!1,this.desktop=!1}ngOnInit(){this.desktop=this.platform.is("desktop")}ionViewWillEnter(){this.getTasks(),this.getUser()}getUser(){return this.user=this.utilsSvc.getElementFromLocalStorage("user")}getPercentage(i){return this.utilsSvc.getPercentage(i)}addOrUpdateTask(i){var o=this;return(0,v.Z)(function*(){let a=yield o.utilsSvc.presentModal({component:P,componentProps:{task:i},cssClass:"add-update-modal"});a&&a.success&&o.getTasks()})()}getTasks(){let o=`users/${this.utilsSvc.getElementFromLocalStorage("user").uid}`;this.loading=!0;let a=this.firebaseSvc.getSubcollection(o,"tasks").subscribe({next:d=>{console.log(d),this.tasks=d,a.unsubscribe(),this.loading=!1}})}confirmDeleteTask(i){this.utilsSvc.presentAlert({header:"Eliminar tarea",message:"\xbfQuieres eliminar esta tarea?",mode:"ios",buttons:[{text:"Cancelar",role:"cancel"},{text:"Si, eliminar",handler:()=>{this.deleteTask(i)}}]})}deleteTask(i){let o=`users/${this.user.uid}/tasks/${i.id}`;this.utilsSvc.presentLoading(),this.firebaseSvc.deleteDocument(o).then(a=>{this.utilsSvc.presentToast({message:"Tarea eliminada correctamente",color:"success",icon:"checkmark-circle-outline",duration:2e3}),this.getTasks(),this.utilsSvc.dismissLoading()},a=>{this.utilsSvc.presentToast({message:a,color:"warning",icon:"alert-circle-outline",duration:5e3}),this.utilsSvc.dismissLoading()})}}return(t=s).\u0275fac=function(i){return new(i||t)(e.Y36(g.O),e.Y36(h.F),e.Y36(r.t4))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-home"]],decls:11,vars:5,consts:[["title","Tareas"],["mode","ios",1,"ion-margin",3,"click"],["slot","end","name","add-circle-outline"],["size-lg","6","size-md","6","size-sm","12","size","12",4,"ngFor","ngForOf"],[4,"ngIf"],["size-lg","6","size-md","6","size-sm","12","size","12"],["mode","ios"],["size-lg","5","size-md","5","size-sm","4","size","12",1,"ion-text-center"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","titleColor","animationDuration","subtitle"],["size-lg","7","size-md","7","size-sm","8","size","12",1,"ion-padding"],[1,"title"],[1,"ion-text-center"],["mode","ios","size","small",1,"task-btn",3,"click"],["slot","end","name","eye-outline"],["mode","ios","color","danger","size","small",1,"task-btn",3,"click"],["slot","end","name","trash-outline"],[4,"ngFor","ngForOf"],["animated","",2,"width","50%"],["animated","",2,"width","40%"],["size","12",1,"empty"],["name","create-outline"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-content"),e._UZ(1,"app-header",0),e.TgZ(2,"div")(3,"ion-button",1),e.NdJ("click",function(){return o.addOrUpdateTask()}),e._uU(4," Nueva Tarea "),e._UZ(5,"ion-icon",2),e.qZA(),e.TgZ(6,"ion-grid")(7,"ion-row"),e.YNc(8,I,19,16,"ion-col",3),e.qZA(),e.YNc(9,z,2,2,"ion-row",4),e.YNc(10,H,5,0,"ion-row",4),e.qZA()()()),2&i&&(e.xp6(2),e.Tol(!o.desktop&&o.tasks.length>=2?"content-full":"content"),e.xp6(6),e.Q6J("ngForOf",o.tasks),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading&&!o.tasks.length))},dependencies:[u.sg,u.O5,r.YG,r.PM,r.wI,r.W2,r.jY,r.gu,r.Nd,r.CK,_.G,M.nu,u.OU],styles:["ion-card[_ngcontent-%COMP%]{border-radius:15px;padding:10px;min-height:200px;border:1px solid rgba(255,255,255,.168)}ion-card[_ngcontent-%COMP%]:hover{cursor:pointer;background:var(--ion-color-light)}.title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;padding-top:10px;line-height:20px}.task-btn[_ngcontent-%COMP%]{width:120px}.empty[_ngcontent-%COMP%]{padding-top:15vh}.content-full[_ngcontent-%COMP%]{width:100%;background:var(--ion-color-light);color:var(--ion-color-light-contrast);border-radius:20px 20px 0 0;margin-top:5vh;padding:15px 0;box-shadow:0 -8px 40px -16px #00000059;-webkit-box-shadow:0px -8px 40px -16px rgba(0,0,0,.35);-moz-box-shadow:0px -8px 40px -16px rgba(0,0,0,.35)}"]}),s})()}];let Q=(()=>{var t;class s{}return(t=s).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(q),p.Bz]}),s})();var y=l(6208);let F=(()=>{var t;class s{}return(t=s).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,c.u5,r.Pc,Q,y.m]}),s})()}}]);